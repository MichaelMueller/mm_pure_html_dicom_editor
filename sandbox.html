<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Sandbox</title>
  </head>
  <body>
    <script src="public/app.js"></script>
    <script>

    ///
    /// Test App
    ///
    class CountriesDatabase extends App
    {
        constructor()
        {
            super();
        }
        ///
        /// @param string path
        /// @param mixed value
        /// @return void
        ///  
        _filter_on_update( path, value ) { 
            //document.getElementById("console").innerHTML += `<p>_filter_on_update: path='${path}', value='${String( value )}'</p>`
            return value; }
        ///
        /// @param string path
        /// @param mixed value
        /// @return void
        ///  
        _filter_on_get( path, value ) { 
            //document.getElementById("console").innerHTML += `<p>_filter_on_get: path='${path}', value='${String( value )}'</p>`
            return value; }
        ///
        /// @param object changes
        /// @param object curr_value
        /// @return bool
        ///  
        _is_valid( path, updated_value, curr_value ) 
        {             
            //document.getElementById("console").innerHTML += `<p>_is_valid: path='${path}', updated_value='${String( updated_value )}', curr_value='${String( curr_value )}'</p>`
            return true; 
        }
        ///
        /// @param object updated_items all changes as path -> value items
        /// @param object prev_values
        /// @return void
        ///  
        _on_updated( updated_items, prev_items ) 
        {            
            for( let path in updated_items )
                document.getElementById("console").innerHTML += `<p>_on_updated: path='${path}', updated_value='${String( updated_items[path] )}', prev_value='${String( prev_items[path] )}'</p>`
        }
    }
    
    document.addEventListener("DOMContentLoaded", function(event) 
    {                 
        let countries_databse = new CountriesDatabase();
        countries_databse.update({
            "de":
            {
                "name": "Federal Republic of Germany",
                "population": 82,
            },
            "usa":
            {
                "name": "United States of America",
                "population": 350,
            },
            "uk":
            {
                "name": "United Kingdom",
                "population": 76,
            }
        });
        countries_databse.update({"uk": { "population": 66 }})
    });
    </script>

<pre id="console">

</pre>
  </body>
</html>
